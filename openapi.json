{"openapi":"3.1.0","info":{"title":"Chat4All v2 – API REST Gateway","version":"1.0.0"},"paths":{"/metrics":{"get":{"summary":"Metrics","description":"Endpoint that serves Prometheus metrics.","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/login":{"post":{"summary":"Login","operationId":"login_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequestBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseBody"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/groups":{"get":{"summary":"Listar grupos","operationId":"list_groups_groups_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"summary":"Criar grupo","operationId":"create_group_groups_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGroupBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/groups/{group_name}/join":{"post":{"summary":"Entrar em grupo","operationId":"join_group_groups__group_name__join_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_name","in":"path","required":true,"schema":{"type":"string","title":"Group Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/online":{"get":{"summary":"Usuários Online","operationId":"list_online_users_online_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/users/me":{"get":{"summary":"Me","operationId":"me_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/files":{"post":{"summary":"Upload File","operationId":"upload_file_v1_files_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_v1_files_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/files/{file_id}":{"get":{"summary":"Download File","operationId":"download_file_v1_files__file_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/messages":{"post":{"summary":"Send Message","operationId":"send_message_v1_messages_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_send_message_v1_messages_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/conversations/{conversation_id}/messages":{"get":{"summary":"List Messages","operationId":"list_messages_v1_conversations__conversation_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/conversations":{"get":{"summary":"List Conversations","operationId":"list_conversations_v1_conversations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/files/multipart/initiate":{"post":{"summary":"Multipart Initiate","description":"Inicia um upload multipart e devolve upload_id.","operationId":"multipart_initiate_v1_files_multipart_initiate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultipartInitiateBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/v1/files/multipart/{upload_id}/chunk":{"put":{"summary":"Multipart Chunk","description":"Envia um chunk para o upload_id informado.","operationId":"multipart_chunk_v1_files_multipart__upload_id__chunk_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"upload_id","in":"path","required":true,"schema":{"type":"string","title":"Upload Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_multipart_chunk_v1_files_multipart__upload_id__chunk_put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/files/multipart/{upload_id}/complete":{"post":{"summary":"Multipart Complete","description":"Conclui o upload multipart, junta os chunks, envia para o Object Storage\ne devolve file_id.","operationId":"multipart_complete_v1_files_multipart__upload_id__complete_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"upload_id","in":"path","required":true,"schema":{"type":"string","title":"Upload Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/files/{file_id}/presigned":{"get":{"summary":"Get Presigned Url","operationId":"get_presigned_url_v1_files__file_id__presigned_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_multipart_chunk_v1_files_multipart__upload_id__chunk_put":{"properties":{"chunk_index":{"type":"integer","title":"Chunk Index","description":"Índice do chunk, começando em 0 ou 1"},"chunk":{"type":"string","format":"binary","title":"Chunk"}},"type":"object","required":["chunk_index","chunk"],"title":"Body_multipart_chunk_v1_files_multipart__upload_id__chunk_put"},"Body_send_message_v1_messages_post":{"properties":{"to":{"type":"string","title":"To"},"channel":{"type":"string","title":"Channel","default":"internal"},"type":{"type":"string","title":"Type","default":"text"},"text":{"type":"string","title":"Text","default":""},"file_id":{"type":"string","title":"File Id","default":""}},"type":"object","required":["to"],"title":"Body_send_message_v1_messages_post"},"Body_upload_file_v1_files_post":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["conversation_id","file"],"title":"Body_upload_file_v1_files_post"},"CreateGroupBody":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"CreateGroupBody"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequestBody":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequestBody"},"LoginResponseBody":{"properties":{"ok":{"type":"boolean","title":"Ok"},"token":{"type":"string","title":"Token"},"message":{"type":"string","title":"Message"}},"type":"object","required":["ok","token","message"],"title":"LoginResponseBody"},"MultipartInitiateBody":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"filename":{"type":"string","title":"Filename"},"mime_type":{"type":"string","title":"Mime Type","default":"application/octet-stream"}},"type":"object","required":["conversation_id","filename"],"title":"MultipartInitiateBody"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}